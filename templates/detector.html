{% extends "base.html" %}
{% block title %}TruthGuard â€¢ Fake News Detector{% endblock %}

{% block head_extra %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/detector.css') }}?v=1">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
{% endblock %}

{% block content %}
<div class="detector-bg min-h-screen">
  <div class="detector-content">
    <!-- Hero Section -->
    <section class="relative isolate mx-auto max-w-7xl px-4 pt-12 md:px-6 md:pt-16">
      <div class="mx-auto max-w-3xl text-center mb-12">
        <span class="inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-3 py-1 text-xs text-neutral-700 shadow-sm ring-1 ring-black/10 dark:border-white/10 dark:bg-neutral-900 dark:text-neutral-300">
          <span class="h-2 w-2 rounded-full bg-indigo-500"></span>
          AI-powered fact checking
        </span>

        <h1 class="mt-4 text-4xl font-extrabold tracking-tight sm:text-5xl">
          Detect Fake News
        </h1>

        <p class="mt-4 mx-auto max-w-xl text-neutral-700 dark:text-neutral-300">
          Analyze articles and URLs for factual accuracy using advanced machine learning and cross-verification
        </p>
      </div>

      <!-- Model Status Card -->
      <div class="mx-auto max-w-4xl mb-8">
        <div id="modelStatus" class="rounded-2xl ring-1 ring-black/5 bg-white/70 p-4 text-center dark:ring-white/10 dark:bg-neutral-900/50 fade-in">
          <div class="flex items-center justify-center">
            <i class="bi bi-hourglass-split loading-spinner text-indigo-600 dark:text-indigo-400 mr-2"></i>
            <span class="text-neutral-700 dark:text-neutral-300">Checking model status...</span>
          </div>
        </div>

        <!-- Feedback Stats (Admin Only) -->
        {% if user_is_admin %}
        <div id="feedbackStats" class="hidden rounded-2xl ring-1 ring-black/5 bg-white/70 p-6 dark:ring-white/10 dark:bg-neutral-900/50 mt-4">
          <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200">
              <i class="bi bi-graph-up-arrow text-indigo-600 dark:text-indigo-400 mr-2"></i>
              Model Learning Progress
            </h3>
            <div class="flex gap-2">
              <button id="retrainBtn" class="hidden inline-flex items-center justify-center rounded-2xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500/30 hover:bg-indigo-700">
                <i class="bi bi-arrow-repeat mr-1"></i>
                Retrain Model
              </button>
              <button id="manageFeedbackBtn" class="inline-flex items-center justify-center rounded-2xl border border-indigo-200 bg-white px-4 py-2 text-sm font-medium text-indigo-700 hover:bg-indigo-50 dark:border-indigo-400/30 dark:bg-transparent dark:text-indigo-300 dark:hover:bg-indigo-500/10">
                <i class="bi bi-gear mr-1"></i>
                Manage Feedback
              </button>
            </div>
          </div>
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="text-center">
              <div class="text-2xl font-bold text-indigo-600 dark:text-indigo-400" id="totalFeedback">0</div>
              <div class="text-sm text-neutral-600 dark:text-neutral-400">Total Feedback</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-green-600" id="usedFeedback">0</div>
              <div class="text-sm text-neutral-600 dark:text-neutral-400">Used for Training</div>
            </div>
            <div class="text-center">
              <div class="text-2xl font-bold text-orange-600" id="pendingFeedback">0</div>
              <div class="text-sm text-neutral-600 dark:text-neutral-400">Pending Training</div>
            </div>
          </div>
          <div id="retrainInfo" class="hidden mt-3 alert alert-success">
            <div class="flex items-center">
              <i class="bi bi-info-circle mr-2"></i>
              <span>Ready for retraining. Review feedback entries before retraining the model.</span>
            </div>
          </div>
        </div>
        {% endif %}
      </div>

      <!-- Main Detector Card -->
      <div class="mx-auto max-w-4xl">
        <div class="rounded-2xl ring-1 ring-black/5 bg-white/70 p-8 dark:ring-white/10 dark:bg-neutral-900/50">
          <div class="text-center mb-8">
            <h2 class="text-2xl font-semibold text-neutral-800 dark:text-neutral-200 mb-2">
              Configure Analysis Settings
            </h2>
            <p class="text-neutral-600 dark:text-neutral-400">
              Choose your analysis method and input type
            </p>
          </div>

          <!-- Title Generation Method -->
          <div class="mb-8">
            <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-4">
              <i class="bi bi-type text-indigo-600 dark:text-indigo-400 mr-2"></i>
              Title Generation Method
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <!-- Cards are ring-only; hover ring + keyboard focus ring are indigo-600 -->
              <div id="autoTitleBtn"
                   class="method-card rounded-2xl bg-white/70 p-6 ring-1 ring-inset ring-black/10 dark:bg-neutral-900/50 dark:ring-white/10 cursor-pointer hover:-translate-y-0.5 hover:ring-2 hover:ring-indigo-600 focus-visible:ring-2 focus-visible:ring-indigo-600 dark:hover:ring-2 dark:hover:ring-indigo-600 dark:focus-visible:ring-2 dark:focus-visible:ring-indigo-600"
                   tabindex="0" role="button" aria-pressed="false">
                <div class="method-icon bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400">
                  <i class="bi bi-magic"></i>
                </div>
                <div class="text-center">
                  <h4 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-2">Automatic</h4>
                  <p class="text-sm text-neutral-600 dark:text-neutral-400 mb-2">AI will generate the title</p>
                  <span class="text-xs text-blue-600 dark:text-blue-400 font-medium">Powered by Gemini-2.5-Flash</span>
                </div>
              </div>
              
              <div id="manualTitleBtn"
                   class="method-card rounded-2xl bg-white/70 p-6 ring-1 ring-inset ring-black/10 dark:bg-neutral-900/50 dark:ring-white/10 cursor-pointer hover:-translate-y-0.5 hover:ring-2 hover:ring-indigo-600 focus-visible:ring-2 focus-visible:ring-indigo-600 dark:hover:ring-2 dark:hover:ring-indigo-600 dark:focus-visible:ring-2 dark:focus-visible:ring-indigo-600"
                   tabindex="0" role="button" aria-pressed="false">
                <div class="method-icon bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400">
                  <i class="bi bi-pencil-square"></i>
                </div>
                <div class="text-center">
                  <h4 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-2">Manual</h4>
                  <p class="text-sm text-neutral-600 dark:text-neutral-400 mb-2">User enters the title</p>
                  <span class="text-xs text-green-600 dark:text-green-400 font-medium">Custom title input</span>
                </div>
              </div>
            </div>

            <!-- Manual Title Input -->
            <div id="manualTitleInput" class="hidden input-section ring-1 ring-inset ring-black/10 dark:ring-white/10">
              <h4 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-3">
                <i class="bi bi-pencil text-green-600 dark:text-green-400 mr-2"></i>
                Enter News Title
              </h4>
              <input 
                type="text" 
                id="newsTitle" 
                placeholder="Enter a descriptive title for the news article"
                class="detector-input ring-1 ring-inset ring-neutral-400/40 dark:ring-white/15 focus:ring-2 focus:ring-indigo-600 dark:focus:ring-2 dark:focus:ring-indigo-600"
                maxlength="200"
              />
              <div class="char-counter" id="titleCount">0 characters</div>
            </div>
          </div>

          <!-- News Input Method -->
          <div class="mb-8">
            <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-4">
              <i class="bi bi-input-cursor text-indigo-600 dark:text-indigo-400 mr-2"></i>
              News Input Method
            </h3>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
              <div id="articleLinkBtn"
                   class="method-card rounded-2xl bg-white/70 p-6 ring-1 ring-inset ring-black/10 dark:bg-neutral-900/50 dark:ring-white/10 cursor-pointer hover:-translate-y-0.5 hover:ring-2 hover:ring-indigo-600 focus-visible:ring-2 focus-visible:ring-indigo-600 dark:hover:ring-2 dark:hover:ring-indigo-600 dark:focus-visible:ring-2 dark:focus-visible:ring-indigo-600"
                   tabindex="0" role="button" aria-pressed="false">
                <div class="method-icon bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400">
                  <i class="bi bi-link-45deg"></i>
                </div>
                <div class="text-center">
                  <h4 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-2">Article Link</h4>
                  <p class="text-sm text-neutral-600 dark:text-neutral-400 mb-2">Paste Article URL</p>
                  <span class="text-xs text-purple-600 dark:text-purple-400 font-medium">Auto-extract content</span>
                </div>
              </div>
              
              <div id="articleSnippetBtn"
                   class="method-card rounded-2xl bg-white/70 p-6 ring-1 ring-inset ring-black/10 dark:bg-neutral-900/50 dark:ring-white/10 cursor-pointer hover:-translate-y-0.5 hover:ring-2 hover:ring-indigo-600 focus-visible:ring-2 focus-visible:ring-indigo-600 dark:hover:ring-2 dark:hover:ring-indigo-600 dark:focus-visible:ring-2 dark:focus-visible:ring-indigo-600"
                   tabindex="0" role="button" aria-pressed="false">
                <div class="method-icon bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400">
                  <i class="bi bi-textarea-t"></i>
                </div>
                <div class="text-center">
                  <h4 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-2">Article Snippet</h4>
                  <p class="text-sm text-neutral-600 dark:text-neutral-400 mb-2">Paste Article Text</p>
                  <span class="text-xs text-orange-600 dark:text-orange-400 font-medium">Direct text input</span>
                </div>
              </div>
            </div>

            <!-- Article Link Input -->
            <div id="articleLinkInput" class="hidden input-section ring-1 ring-inset ring-black/10 dark:ring-white/10">
              <h4 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-3">
                <i class="bi bi-globe text-purple-600 dark:text-purple-400 mr-2"></i>
                Enter Article URL
              </h4>
              <div class="relative">
                <input 
                  type="url" 
                  id="articleUrl" 
                  placeholder="https://example.com/news-article"
                  class="detector-input pr-10 ring-1 ring-inset ring-neutral-400/40 dark:ring-white/15 focus:ring-2 focus:ring-indigo-600 dark:focus:ring-2 dark:focus:ring-indigo-600"
                />
                <i class="bi bi-link absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400"></i>
              </div>
              <p class="text-sm text-neutral-600 dark:text-neutral-400 mt-2">
                <i class="bi bi-info-circle mr-1"></i>
                We'll extract the article content automatically
              </p>
            </div>

            <!-- Article Snippet Input -->
            <div id="articleSnippetInput" class="hidden input-section ring-1 ring-inset ring-black/10 dark:ring-white/10">
              <h4 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-3">
                <i class="bi bi-file-text text-orange-600 dark:text-orange-400 mr-2"></i>
                Enter Article Text
              </h4>
              <textarea 
                id="newsText" 
                rows="8" 
                placeholder="Paste the full article text here for analysis..."
                class="detector-input ring-1 ring-inset ring-neutral-400/40 dark:ring-white/15 focus:ring-2 focus:ring-indigo-600 dark:focus:ring-2 dark:focus:ring-indigo-600"
                maxlength="5000"
              ></textarea>
              <div class="char-counter" id="textCount">0 characters</div>
            </div>
          </div>

          <!-- Configuration Summary & Actions -->
          <div id="actionButtons" class="hidden">
            <div class="rounded-2xl ring-1 ring-black/5 bg-white/70 p-6 dark:ring-white/10 dark:bg-neutral-900/50 mb-6">
              <h4 class="font-semibold text-neutral-800 dark:text-neutral-200 mb-3">
                <i class="bi bi-check-circle text-green-600 mr-2"></i>
                Configuration Summary
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                  <span class="text-neutral-600 dark:text-neutral-400">Title Method:</span>
                  <span class="font-medium ml-2" id="selectedTitleMethod">-</span>
                </div>
                <div>
                  <span class="text-neutral-600 dark:text-neutral-400">Input Method:</span>
                  <span class="font-medium ml-2" id="selectedInputMethod">-</span>
                </div>
              </div>
            </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center">
              <button 
                id="analyzeBtn"
                disabled
                class="inline-flex items-center justify-center rounded-2xl bg-indigo-600 px-8 py-4 text-lg font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500/30 hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <i class="bi bi-search mr-2"></i>
                Analyze Article
              </button>
              <button 
                id="resetBtn"
                class="inline-flex items-center justify-center rounded-2xl border border-indigo-200 bg-white px-8 py-4 text-lg font-medium text-indigo-700 hover:bg-indigo-50 dark:border-indigo-400/30 dark:bg-transparent dark:text-indigo-300 dark:hover:bg-indigo-500/10"
              >
                <i class="bi bi-arrow-clockwise mr-2"></i>
                Reset Form
              </button>
            </div>
          </div>

          <!-- Loading State -->
          <div id="loading" class="hidden text-center py-8">
            <div class="inline-flex items-center">
              <i class="bi bi-arrow-clockwise loading-spinner text-indigo-600 dark:text-indigo-400 text-3xl mr-3"></i>
              <span class="text-lg text-neutral-700 dark:text-neutral-300">Analyzing content...</span>
            </div>
          </div>

          <!-- Error Display -->
          <div id="error" class="hidden alert alert-error">
            <div class="flex items-center">
              <i class="bi bi-exclamation-circle text-xl mr-3"></i>
              <div>
                <h4 class="font-semibold">Error</h4>
                <p id="errorMessage"></p>
              </div>
            </div>
          </div>

          <!-- Non-Political Content Display -->
          <div id="nonPoliticalResult" class="hidden">
            <div class="alert alert-warning">
              <div class="text-center mb-6">
                <i class="bi bi-info-circle text-4xl mb-3"></i>
                <h3 class="text-xl font-semibold mb-2">Content Not Applicable</h3>
                <p>This content is not Philippine political news and cannot be analyzed by this specialized detector.</p>
              </div>
              
              <div class="rounded-2xl ring-1 ring-black/5 bg-white/70 p-6 dark:ring-white/10 dark:bg-neutral-900/50 mb-4">
                <h4 class="font-semibold text-neutral-800 dark:text-neutral-200 mb-2">
                  <i class="bi bi-file-text mr-2"></i>
                  <span id="nonPoliticalTitle">Content Analysis</span>
                </h4>
                <div class="bg-neutral-50 dark:bg-neutral-700 rounded-lg p-3">
                  <p id="nonPoliticalPreview" class="text-neutral-700 dark:text-neutral-300 text-sm leading-relaxed"></p>
                </div>
              </div>

              <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button id="tryAgainBtn" class="inline-flex items-center justify-center rounded-2xl bg-indigo-600 px-6 py-3 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500/30 hover:bg-indigo-700">
                  <i class="bi bi-arrow-left mr-2"></i>
                  Try Again
                </button>
                <button id="learnMoreBtn" class="inline-flex items-center justify-center rounded-2xl border border-indigo-200 bg-white px-6 py-3 text-sm font-medium text-indigo-700 hover:bg-indigo-50 dark:border-indigo-400/30 dark:bg-transparent dark:text-indigo-300 dark:hover:bg-indigo-500/10">
                  <i class="bi bi-info-circle mr-2"></i>
                  Learn More
                </button>
              </div>

              <div id="learnMoreContent" class="hidden mt-6 rounded-2xl ring-1 ring-black/5 bg-white/70 p-6 dark:ring-white/10 dark:bg-neutral-900/50">
                <h5 class="font-semibold text-indigo-800 dark:text-indigo-200 mb-2">About This Detector</h5>
                <div class="text-indigo-700 dark:text-indigo-300 text-sm space-y-2">
                  <p>This fake news detector is specifically designed and trained to analyze <strong>Philippine political news content</strong>.</p>
                  <p><strong>What it can analyze:</strong></p>
                  <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>News about Philippine politicians and government officials</li>
                    <li>Political events, elections, and policy announcements</li>
                    <li>Government agency activities and statements</li>
                    <li>Political controversies and investigations</li>
                  </ul>
                  <p><strong>What it cannot analyze:</strong></p>
                  <ul class="list-disc list-inside ml-4 space-y-1">
                    <li>Sports news and entertainment content</li>
                    <li>International news not related to Philippines</li>
                    <li>Business and technology news</li>
                    <li>General lifestyle and health articles</li>
                  </ul>
                  <p class="mt-3">To use this detector, please provide content that relates to Philippine politics or government affairs.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Features Section -->
      <div class="mx-auto max-w-4xl mt-12">
        <div class="feature-grid">
          <div class="feature-item">
            <div class="method-icon bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 mx-auto mb-4">
              <i class="bi bi-cpu"></i>
            </div>
            <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-2">AI-Powered</h3>
            <p class="text-sm text-neutral-600 dark:text-neutral-400">Advanced machine learning algorithms trained on thousands of articles</p>
          </div>
          
          <div class="feature-item">
            <div class="method-icon bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 mx-auto mb-4">
              <i class="bi bi-lightning"></i>
            </div>
            <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-2">Lightning Fast</h3>
            <p class="text-sm text-neutral-600 dark:text-neutral-400">Get results in seconds with our optimized analysis pipeline</p>
          </div>
          
          <div class="feature-item">
            <div class="method-icon bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 mx-auto mb-4">
              <i class="bi bi-graph-up"></i>
            </div>
            <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-2">Detailed Reports</h3>
            <p class="text-sm text-neutral-600 dark:text-neutral-400">Comprehensive analysis with confidence scores and explanations</p>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<!-- Feedback Management Modal -->
<div id="feedbackModal" class="hidden fixed inset-0 modal-backdrop z-50 flex items-center justify-center p-4">
  <div class="modal-content w-full max-w-4xl max-h-[80vh] overflow-hidden flex flex-col">
    <div class="flex justify-between items-center p-6 border-b border-neutral-200 dark:border-neutral-700">
      <h3 class="text-xl font-semibold text-neutral-800 dark:text-neutral-200">
        <i class="bi bi-collection text-indigo-600 dark:text-indigo-400 mr-2"></i>
        Feedback Management
      </h3>
      <button id="closeFeedbackModal" class="text-neutral-500 dark:text-neutral-400 hover:text-neutral-700 dark:hover:text-neutral-200">
        <i class="bi bi-x-lg text-xl"></i>
      </button>
    </div>
    
    <div id="feedbackList" class="flex-1 overflow-y-auto p-6">
      <div class="text-center text-neutral-500 dark:text-neutral-400 py-8">
        <i class="bi bi-hourglass-split loading-spinner text-2xl mb-2"></i>
        <p>Loading feedback entries...</p>
      </div>
    </div>
    
    <div class="p-6 border-t border-neutral-200 dark:border-neutral-700 flex justify-between items-center">
      <div class="text-sm text-neutral-600 dark:text-neutral-400">
        <span id="modalTotalFeedback">0</span> total entries
      </div>
      <button id="refreshFeedback" class="inline-flex items-center justify-center rounded-2xl bg-indigo-600 px-5 py-3 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500/30 hover:bg-indigo-700">
        <i class="bi bi-arrow-clockwise mr-2"></i>
        Refresh
      </button>
    </div>
  </div>
</div>

<!-- Analysis Modal Template -->
<div id="analysisModal" class="fixed inset-0 modal-backdrop z-50 hidden">
  <div class="min-h-screen flex items-center justify-center p-4">
    <div class="modal-card w-full max-w-md overflow-hidden flex flex-col">
      <!-- Fixed Header -->
      <div class="flex justify-between items-center p-6 border-b border-neutral-200 dark:border-neutral-700">
        <h2 class="text-xl font-semibold text-neutral-800 dark:text-neutral-200">
          <i class="bi bi-gear text-indigo-600 dark:text-indigo-400 mr-2"></i>
          <span id="modalTitle">Analyzing Content</span>
        </h2>
        <button id="closeAnalysisModal" class="text-neutral-500 hover:text-neutral-700 dark:text-neutral-400 dark:hover:text-neutral-200 transition-colors">
          <i class="bi bi-x-lg text-xl"></i>
        </button>
      </div>
      
      <!-- Modal Content -->
      <div id="analysisModalContent" class="p-6 text-center">
        <!-- Loading State -->
        <div id="analysisLoading" class="mb-4">
          <div class="mx-auto mb-4 h-12 w-12 rounded-full border-4 border-neutral-200 border-t-indigo-600 animate-spin dark:border-neutral-700 dark:border-t-indigo-400"></div>
          <h3 class="text-lg font-semibold text-neutral-800 dark:text-neutral-200 mb-2">Processing Your Request</h3>
          <p class="text-neutral-600 dark:text-neutral-400 mb-4">
            <span id="analysisStatus">Preparing analysis...</span>
          </p>
          <div class="w-full bg-neutral-200 rounded-full h-2 dark:bg-neutral-700">
            <div id="progressBar" class="bg-indigo-600 h-2 rounded-full transition-all duration-300" style="width: 10%"></div>
          </div>
        </div>
        
        <!-- Error State -->
        <div id="analysisError" class="hidden">
          <div class="mx-auto mb-4 h-12 w-12 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center">
            <i class="bi bi-exclamation-circle text-red-600 dark:text-red-400 text-2xl"></i>
          </div>
          <h3 class="text-lg font-semibold text-red-800 dark:text-red-200 mb-2">Analysis Failed</h3>
          <p id="errorMessage" class="text-red-600 dark:text-red-400 mb-4">
            An error occurred during analysis.
          </p>
        </div>
        
        <!-- Success State -->
        <div id="analysisSuccess" class="hidden">
          <div class="mx-auto mb-4 h-12 w-12 rounded-full bg-green-100 dark:bg-green-900/30 flex items-center justify-center">
            <i class="bi bi-check-circle text-green-600 dark:text-green-400 text-2xl"></i>
          </div>
          <h3 class="text-lg font-semibold text-green-800 dark:text-green-200 mb-2">Analysis Complete</h3>
          <p class="text-green-600 dark:text-green-400 mb-4">
            Your content has been successfully analyzed.
          </p>
        </div>
      </div>
      
      <!-- Modal Footer -->
      <div id="analysisModalFooter" class="border-t border-neutral-200 dark:border-neutral-700 p-4">
        <div class="flex justify-center gap-3">
          <button id="retryAnalysis" class="hidden inline-flex items-center justify-center rounded-2xl bg-indigo-600 px-4 py-2 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500/30 hover:bg-indigo-700">
            <i class="bi bi-arrow-clockwise mr-2"></i>
            Retry Analysis
          </button>
          <button id="closeModalBtn" class="hidden inline-flex items-center justify-center rounded-2xl border border-neutral-300 bg-white px-4 py-2 text-sm font-medium text-neutral-700 hover:bg-neutral-50 dark:border-neutral-600 dark:bg-neutral-800 dark:text-neutral-300 dark:hover:bg-neutral-700">
            Close
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}

{% block body_extra %}
<script src="{{ url_for('static', filename='js/detector-modal.js') }}"></script>
<script src="{{ url_for('static', filename='js/detector.js') }}"></script>
{% endblock %}
