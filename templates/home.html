{% extends "base.html" %}
{% block title %}TruthGuard • Catch misinformation before it spreads{% endblock %}

{% block head_extra %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}?v=1">
{% endblock %}

{% block content %}
  <!-- HERO (background lives on body pseudo-elements) -->
  <section id="hero" class="relative isolate mx-auto max-w-7xl px-4 pt-16 md:px-6 md:pt-24">
    <div class="mx-auto max-w-3xl text-center">
      <span class="inline-flex items-center gap-2 rounded-full border border-neutral-200 bg-white px-3 py-1 text-xs text-neutral-700 shadow-sm ring-1 ring-black/10 dark:border-white/10 dark:bg-neutral-900 dark:text-neutral-300">
        <span class="h-2 w-2 rounded-full bg-emerald-500"></span>
        Live analysis. Real sources. No fluff.
      </span>

      <h1 class="mt-4 text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl">
        Catch misinformation before it spreads.
      </h1>

      <p class="mt-4 mx-auto max-w-xl text-neutral-700 dark:text-neutral-300">
        TruthGuard analyzes Philippine political news using advanced hybrid AI—delivering factuality scores, source verification, and comprehensive credibility analysis.
      </p>

      <div class="mx-auto mt-6 grid w-full max-w-md grid-cols-1 gap-3 sm:grid-cols-2">
        <!-- Primary CTA now uses the accent (same as Sign up) -->
        {% if session.get('user_id') %}
        <a href="{{ url_for('main.detector_page') }}" class="inline-flex w-full items-center justify-center rounded-2xl bg-indigo-600 px-5 py-3 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500/30 hover:bg-indigo-700">Get Started</a>
        {% else %}
        <a href="{{ url_for('auth.login') }}" class="inline-flex w-full items-center justify-center rounded-2xl bg-indigo-600 px-5 py-3 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500/30 hover:bg-indigo-700">Get Started</a>
        {% endif %}
        <button onclick="scrollToFeatures()" class="inline-flex w-full items-center justify-center rounded-2xl border border-indigo-200 bg-white px-5 py-3 text-sm font-medium text-indigo-700 hover:bg-indigo-50 dark:border-indigo-400/30 dark:bg-transparent dark:text-indigo-300 dark:hover:bg-indigo-500/10">Learn More</button>
      </div>

      <div class="mx-auto mt-6 grid max-w-xl grid-cols-3 gap-4">
        <div class="rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-center text-sm dark:border-white/10 dark:bg-white/5">
          <div class="font-semibold">ML + AI</div><div class="text-neutral-600 dark:text-neutral-400">Hybrid analysis</div>
        </div>
        <div class="rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-center text-sm dark:border-white/10 dark:bg-white/5">
          <div class="font-semibold">Philippine</div><div class="text-neutral-600 dark:text-neutral-400">Political focus</div>
        </div>
        <div class="rounded-2xl border border-neutral-200 bg-white px-4 py-3 text-center text-sm dark:border-white/10 dark:bg-white/5">
          <div class="font-semibold">Cross-Check</div><div class="text-neutral-600 dark:text-neutral-400">Source verified</div>
        </div>
      </div>
    </div>
  </section>

  <!-- FEATURES -->
  <section id="features" class="mx-auto max-w-7xl px-4 py-20 md:px-6">
    <div class="mx-auto max-w-3xl text-center">
      <h2 class="text-3xl font-extrabold tracking-tight md:text-4xl">Powerful features, simple workflow</h2>
      <p class="mt-3 text-neutral-700 dark:text-neutral-300">Everything you need to verify political news accurately—without the clutter.</p>
    </div>

    <div class="mt-12 grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
      {% set features = [
        ('Detector','Analyze Philippine political news using hybrid AI technology. Input text or URLs for instant Rebbal/Fake predictions with factuality ratings (0-100).'),
        ('Cross-Reference','Search trusted outlets to verify claims. Get source corroboration analysis and evidence from reliable news sources to support article content.'),
        ('Content Extraction','Automatically extract article content from URLs. Get titles, previews, and full text analysis without manual copy-pasting from news websites.'),
        ('History','Every analysis is saved with search, filtering, and export capabilities. Browse your past scans by classification, source type, and factuality scores.'),
        ('Game Hub','Master fact-checking through 5 progressive stages: Headline Check, Source Showdown, Content Preview, Claim Cross-Check, and Full Article Analysis with XP rewards.'),
        ('AI Enhancement','Powered by Gemini AI for content classification, factuality scoring, and cross-verification. Hybrid ML + AI models ensure accurate Philippine political news detection.')
      ] %}
      {% for title, body in features %}
      <div class="rounded-2xl border border-neutral-200 bg-white/70 p-6 ring-1 ring-black/5 transition hover:-translate-y-0.5 hover:shadow-xl dark:border-white/10 dark:bg-neutral-900/50">
        <div class="mb-3 inline-flex h-10 w-10 items-center justify-center rounded-xl bg-indigo-600/10 ring-1 ring-indigo-500/20 dark:bg-indigo-500/20 dark:ring-indigo-400/30">
          {% if title == 'Detector' %}
            <!-- Lightning bolt -->
            <svg class="h-5 w-5 text-indigo-600 dark:text-indigo-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M13 2 3 14h7l-1 8 11-12h-7l0-8z"/></svg>
          {% elif title == 'Cross-Reference' %}
            <!-- Link/chain -->
            <svg class="h-5 w-5 text-indigo-600 dark:text-indigo-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M10.6 13.4a4 4 0 0 1 0-5.7l2-2a4 4 0 1 1 5.7 5.7l-1 1-1.4-1.4 1-1a2 2 0 1 0-2.8-2.8l-2 2a2 2 0 0 0 0 2.8l-1.5 1.4ZM13.4 10.6a4 4 0 0 1 0 5.7l-2 2a4 4 0 0 1-5.7-5.7l1-1 1.4 1.4-1 1a2 2 0 1 0 2.8 2.8l2-2a2 2 0 0 0 0-2.8l1.5-1.4Z"/></svg>
          {% elif title == 'Content Extraction' %}
            <!-- Download/extract -->
            <svg class="h-5 w-5 text-indigo-600 dark:text-indigo-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm1 10V7h-2v5H8l4 4 4-4h-3z"/></svg>
          {% elif title == 'History' %}
            <!-- Clock/history -->
            <svg class="h-5 w-5 text-indigo-600 dark:text-indigo-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 1 0 .001 20.001A10 10 0 0 0 12 2Zm1 5v5.382l3.309 1.912-.996 1.732L11 13V7h2Z"/></svg>
          {% elif title == 'Game Hub' %}
            <!-- Trophy -->
            <svg class="h-5 w-5 text-indigo-600 dark:text-indigo-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M6 2h12v3h2a2 2 0 0 1 2 2c0 3.866-3.134 7-7 7h-4C7.134 14 4 10.866 4 7a2 2 0 0 1 2-2h0V2Zm2 3v2a6 6 0 0 0 6 6 6 6 0 0 0 6-6V5h-2V4H8v1Zm4 11a7.97 7.97 0 0 1-4 1v2h8v-2a7.97 7.97 0 0 1-4-1Z"/></svg>
          {% elif title == 'AI Enhancement' %}
            <!-- Brain/AI -->
            <svg class="h-5 w-5 text-indigo-600 dark:text-indigo-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.94-.49-7-3.85-7-7.93 0-.62.08-1.21.21-1.79L9 15v1c0 1.1.9 2 2 2v1.93zm6.9-2.54c-.26-.81-1-1.39-1.9-1.39h-1v-3c0-.55-.45-1-1-1H8v-2h2c.55 0 1-.45 1-1V7h2c1.1 0 2-.9 2-2v-.41c2.93 1.19 5 4.06 5 7.41 0 2.08-.8 3.97-2.1 5.39z"/></svg>
          {% else %}
            <!-- Fallback (shield) -->
            <svg class="h-5 w-5 text-indigo-600 dark:text-indigo-300" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2 4 5v6c0 5 3.4 8.6 8 11 4.6-2.4 8-6 8-11V5l-8-3Z"/></svg>
          {% endif %}
        </div>
        <h3 class="text-lg font-semibold">{{ title }}</h3>
        <p class="mt-2 text-sm text-neutral-700 dark:text-neutral-300">{{ body }}</p>
      </div>
      {% endfor %}
    </div>
  </section>

  <!-- HOW IT WORKS -->
  <section id="how-it-works" class="mx-auto max-w-7xl px-4 py-20 md:px-6">
    <div class="mx-auto max-w-3xl text-center">
      <h2 class="text-3xl font-extrabold tracking-tight md:text-4xl">How it works</h2>
      <p class="mt-3 text-neutral-700 dark:text-neutral-300">Simple steps to verify any political article or claim.</p>
    </div>

    <div class="mt-12 grid gap-8 md:grid-cols-3">
      <div class="text-center">
        <div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-indigo-100 dark:bg-indigo-900/30">
          <span class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">1</span>
        </div>
        <h3 class="text-lg font-semibold">Input Content</h3>
                <p class="mt-2 text-sm text-neutral-700 dark:text-neutral-300">Paste Philippine political news URLs or text for instant hybrid AI analysis.</p>
      </div>
      
      <div class="text-center">
        <div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-indigo-100 dark:bg-indigo-900/30">
          <span class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">2</span>
        </div>
        <h3 class="text-lg font-semibold">AI Analysis</h3>
        <p class="mt-2 text-sm text-neutral-700 dark:text-neutral-300">Hybrid ML models and Gemini AI analyze content, verify sources, and cross-reference with trusted outlets.</p>
      </div>
      
      <div class="text-center">
        <div class="mx-auto mb-4 flex h-16 w-16 items-center justify-center rounded-full bg-indigo-100 dark:bg-indigo-900/30">
          <span class="text-2xl font-bold text-indigo-600 dark:text-indigo-400">3</span>
        </div>
        <h3 class="text-lg font-semibold">Get Results</h3>
        <p class="mt-2 text-sm text-neutral-700 dark:text-neutral-300">Receive Real/Fake prediction, factuality score (0-100), cross-verification data, and supporting evidence.</p>
      </div>
    </div>
  </section>

  <!-- CTA SECTION -->
  {% if not session.get('user_id') %}
  <section class="mx-auto max-w-7xl px-4 py-20 md:px-6">
    <div class="mx-auto max-w-3xl text-center">
      <div class="rounded-3xl border border-neutral-200 bg-white/70 p-8 ring-1 ring-black/5 dark:border-white/10 dark:bg-neutral-900/50">
        <h2 class="text-3xl font-extrabold tracking-tight md:text-4xl">Ready to fight misinformation?</h2>
        <p class="mt-3 text-neutral-700 dark:text-neutral-300">Join thousands who trust TruthGuard to detect fake news in Philippine politics.</p>
        
        <div class="mt-6 flex flex-col gap-3 sm:flex-row sm:justify-center">
          <a href="{{ url_for('auth.login') }}" class="inline-flex items-center justify-center rounded-2xl bg-indigo-600 px-6 py-3 text-sm font-semibold text-white shadow-sm ring-1 ring-inset ring-indigo-500/30 hover:bg-indigo-700">
            Get Started
          </a>
          <a href="{{ url_for('auth.register') }}" class="inline-flex items-center justify-center rounded-2xl border border-indigo-200 bg-white px-6 py-3 text-sm font-medium text-indigo-700 hover:bg-indigo-50 dark:border-indigo-400/30 dark:bg-transparent dark:text-indigo-300 dark:hover:bg-indigo-500/10">
            Create Free Account
          </a>
        </div>
      </div>
    </div>
  </section>
  {% endif %}
{% endblock %}

{% block body_extra %}
<script>
  // Function to scroll to features section without changing URL
  function scrollToFeatures() {
    const featuresSection = document.getElementById('features');
    if (featuresSection) {
      featuresSection.scrollIntoView({ behavior: 'smooth' });
    }
  }

  // Sync the body's hero background height to the real hero element
  function syncHeroHeight(){
    const hero = document.getElementById('hero');
    if (!hero) return;
    const h = Math.ceil(hero.getBoundingClientRect().height);
    document.documentElement.style.setProperty('--hero-h', h + 'px');
  }
  window.addEventListener('load', syncHeroHeight);
  window.addEventListener('resize', syncHeroHeight);
  document.addEventListener('click', e => {
    if (e.target?.dataset?.themeOption) setTimeout(syncHeroHeight, 0);
  });
</script>
{% endblock %}
